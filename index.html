<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>自学ネタ</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  h1 { text-align: center; }
  #filters { margin-bottom: 20px; }
  select, input { margin-right: 10px; }
  .task { border: 1px solid #ccc; padding: 10px; margin-bottom: 5px; }
  .task span { font-weight: bold; }
</style>
</head>
<body>
<h1>自学ネタ</h1>

<div id="filters">
  ジャンル:
  <select id="genreFilter">
    <option value="">すべて</option>
    <option value="理科">理科</option>
    <option value="社会">社会</option>
    <option value="国語">国語</option>
    <option value="算数">算数</option>
    <option value="英語">英語</option>
    <option value="生活">生活</option>
    <option value="図工">図工</option>
    <option value="音楽">音楽</option>
    <option value="プログラミング">プログラミング</option>
    <option value="雑学">雑学</option>
  </select>

  所要時間:
  <select id="timeFilter">
    <option value="">すべて</option>
    <option value="約5分">約5分</option>
    <option value="約10分">約10分</option>
    <option value="約15分">約15分</option>
    <option value="約20分">約20分</option>
    <option value="約30分">約30分</option>
  </select>

  キーワード検索:
  <input type="text" id="searchInput" placeholder="例: 観察">

  <button onclick="applyFilters()">絞り込む</button>
  <button onclick="resetFilters()">リセット</button>
</div>

<div id="taskList"></div>

<script src="data1.js"></script>
<script src="data2.js"></script>
<script src="data3.js"></script>
<script src="data4.js"></script>
<script src="data5.js"></script>
<script>
  // すべてのデータをまとめる
  const allTasks = [...window.data1, ...window.data2, ...window.data3, ...window.data4, ...window.data5];

  function displayTasks(tasks) {
    const container = document.getElementById('taskList');
    container.innerHTML = '';
    if(tasks.length === 0) {
      container.innerHTML = '<p>該当する自学ネタはありません。</p>';
      return;
    }
    tasks.forEach(task => {
      const div = document.createElement('div');
      div.className = 'task';
      div.innerHTML = `<span>ジャンル:</span> ${task.genre} | <span>所要時間:</span> ${task.time}<br>${task.text}`;
      container.appendChild(div);
    });
  }

  function applyFilters() {
    const genre = document.getElementById('genreFilter').value;
    const time = document.getElementById('timeFilter').value;
    const keyword = document.getElementById('searchInput').value.trim();

    const filtered = allTasks.filter(task => {
      const genreMatch = genre ? task.genre === genre : true;
      const timeMatch = time ? task.time === time : true;
      const keywordMatch = keyword ? task.text.includes(keyword) : true;
      return genreMatch && timeMatch && keywordMatch;
    });

    displayTasks(filtered);
  }

  function resetFilters() {
    document.getElementById('genreFilter').value = '';
    document.getElementById('timeFilter').value = '';
    document.getElementById('searchInput').value = '';
    displayTasks(allTasks);
  }

  // 最初は全件表示
  displayTasks(allTasks);
</script>
</body>
</html>
